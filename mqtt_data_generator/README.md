# HDMS MQTT 가상 데이터 생성기

HDMS 백엔드 시스템에서 사용할 수 있는 MQTT 가상 데이터 생성기입니다.

## 기능

- 실제 데이터베이스 구조를 기반으로 한 가상 센서 데이터 생성
- 배전반 상태 데이터 생성
- GUI를 통한 쉬운 제어 (시작/중지)
- 실시간 로그 출력
- 발행된 메시지 개수 카운트

## 설치 방법

1. Python 3.7 이상 설치
2. 필요한 패키지 설치:
   ```bash
   pip install -r requirements.txt
   ```

## 사용 방법

1. 프로그램 실행:
   ```bash
   python mqtt_data_generator.py
   ```

2. GUI에서 MQTT 브로커 설정:
   - 브로커 주소: `139.150.72.51` (기본값)
   - 포트: `1883` (기본값)
   - 클라이언트 ID: `hdms_data_generator` (기본값)

3. "연결" 버튼을 클릭하여 MQTT 브로커에 연결

4. "시작" 버튼을 클릭하여 데이터 생성 시작

5. "중지" 버튼을 클릭하여 데이터 생성 중지

## 생성되는 데이터

### 센서 데이터 (토픽: `HS/{building_id}/{board_id}/data/{sensor_id}`)

- 전류 센서 (타입 1): 전류, 전압, 전력, 주파수
- 주파수 센서 (타입 194): 주파수, 전압
- 습도 센서 (타입 195): 습도, 주변 온도
- 온도 센서 (타입 196): 온도, 주변 온도

### 배전반 상태 데이터 (토픽: `HB/{building_id}/{board_id}/status`)

- L1/L2/L3 상태
- 각종 알람 상태 (과전압, 저전압, 과전류, 과열 등)
- 메인 전압, 온도, 습도

## 실제 데이터베이스 구조

생성기는 다음과 같은 실제 데이터베이스 구조를 기반으로 합니다:

### 건물 (BUILDINGS)
- 건물 ID: 5, 7
- 건물명: "건물 test", "시설알림test"

### 배전반 (DISTRIBUTION_BOARDS)
- 배전반 ID: 2, 3, 4, 7, 8
- 각 배전반은 특정 건물에 속함

### 센서 (SENSORS)
- 센서 ID: 17, 19, 21, 22, 23
- 각 센서는 특정 배전반에 속함
- 센서 타입에 따라 다른 데이터 생성

## 주의사항

- MQTT 브로커가 실행 중이어야 합니다
- 백엔드 시스템의 MqttService가 해당 토픽을 구독하고 있어야 합니다
- 발행 주기는 2초 기본값으로 설정되어 있습니다

## 문제해결

1. **연결 실패**: MQTT 브로커 주소와 포트를 확인하세요
2. **데이터 수신 안됨**: 백엔드의 MqttConfig 토픽 설정을 확인하세요
3. **GUI 오류**: Python 버전과 tkinter 설치 상태를 확인하세요 